---
title: "Untitled"
output: html_document
date: '2024-05-11'
---

# Introduction

* Greeting: "Good afternoon, everyone. Thank you for joining today's presentation."

* Introduce the topic: "Today, we'll be exploring the forecast reconciliation methodology and how we utilise it to improve the forecast acccuracy in the context of land transfer duty, a critical aspect influencing policy decisions and economic planning."

* Transition into the next part: "Let's start by understanding why forecasting has always been an integral part of our decision-making processes, both in daily life and in complex economic scenarios."

## The Role of Forecasting in Policy Making

* Begin by expressing a universal curiosity: "Humans have always been fascinated by what the future holds and have continually sought ways to predict it. From everyday weather forecasts, like temperature and precipitation, to more complex predictions such as economic growth and GDP."

* Connect this to organizational planning: "Just as we use these predictions in our personal lives, organizations and governments heavily depend on forecasts to shape their policies and future plans. These forecasts help anticipate various outcomes, from general economic conditions to specific financial metrics like expenses and profits."

* Emphasize the relevance to DTF: "The Department of Treasury and Finance (DTF) is no exception in this regard. Predicting and forecasting are integral tools for the DTF, used to adjust policies, implement subsidies, or introduce restrictions based on anticipated economic conditions."

* Highlight LTD forecasting: "One specific area of interest in forecasting for DTF is the land transfer duty, commonly known as stamp duty. Understanding and predicting the dynamics of land transfer duty are crucial for making informed policy decisions that impact the real estate market and, by extension, the broader economy."

* Transition to the specifics of land transfer duty: "Now that we understand the broad importance of forecasting in policy-making, let's focus more closely on land transfer duty â€” what it is, why it matters, and how it impacts property transactions and fiscal policies."


# Slides model used by DTF

- corrplot explaining correlation of 3 variables => justify the use of VAR
- plot of 3 log values => May have similar long term trend
_ Johanson test (null hypothesis of r <= 1 rejected) => Between 3 variables, rank of the matrix 
 is greater than 2. (Or cointegration patterns present)
 
 
 
 ::: flex
```{r three_log_var, fig.height = 3, fig.width = 4, out.width="50%"}
plot_log_value <- ltd_agg %>% 
mutate(log_ltd = log(ltd), 
       log_sales = log(sales),
       log_hvi = log(hvi)) |> 
dplyr::select(-c(ltd, sales, hvi)) |> 
pivot_longer(cols = -Date, names_to = "Variable", values_to = "Value") |>
ggplot(aes(x = Date, y = Value, color = Variable)) +
geom_line() +
labs(x = "Date", y = "Value", title = "Log transformation of LTD, sales and HVI") +
theme_minimal()

ggplotly(plot_log_value)
```

```{r corr_plot, fig.height = 4, fig.width = 4, out.width="50%"}
correlation <- ltd_agg |>
mutate(log_ltd = log(ltd), 
       log_sales = log(sales),
       log_hvi = log(hvi)) |> 
dplyr::select(c(log_ltd, log_sales, log_hvi)) |> 
cor()

corrplot(correlation, method = 'number')
```

:::

## Johanson test 

::: rows

```{r}
jtest <- ca.jo(log(ltd_agg[,-1]), type="trace", K=2, ecdet="none", spec="longrun")

jtest@teststat > jtest@cval[, "5pct"]
```

:::

::: rows

::: flex

```{r s_plot, fig.height = 3, fig.width = 4, out.width="50%"}
s <- ltd_agg |>
mutate(log_ltd = log(ltd), 
       log_sales = log(sales),
       log_hvi = log(hvi)) |> 
dplyr::select(c(log_ltd, log_sales, log_hvi)) |> 
summarise(s = log_ltd*1.000 - 1.9176103*log_sales - 0.8537969*log_hvi) 

df <- data.frame(Index = 1:nrow(s), Value = as.numeric(unlist(s)))

s_plot <- ggplot(df, aes(x = Index, y = Value)) + 
  geom_line(color = "blue") + 
  labs(y = "Value", x = "Index", title = "Linear combination of three time series") +
theme_minimal()

ggplotly(s_plot)
```


```{r}
linear_comb <- as.numeric(unlist(s))
adf.test(linear_comb)
```

:::
:::